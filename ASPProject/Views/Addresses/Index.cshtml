@model IEnumerable<ASPProject.Models.Address>

@{
    ViewBag.Title = "Index";
}

<h2>We need you address if you want us to get your trash</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.AspNetUsers.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Address1)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Address2)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.City)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.State)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ZipCode)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.AspNetUsers.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Type)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Address1)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Address2)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.State)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ZipCode)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.AddressId }) |
                @Html.ActionLink("Details", "Details", new { id = item.AddressId }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.AddressId })
            </td>
        </tr>
    }

</table>
<!DOCTYPE html>
<HTML xmlns:v="urn:schemas-microsoft-com:vml">
<html>
<head>
    <style>
        #map {
            width: 100%;
            height: 400px;
        }
    </style>
    <script>
        var map;

        function initialize() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: new google.maps.LatLng(43.0167, -88, 0070),

            });


            @foreach(var item in Model)
            {
                <text>
            var latlng = new google.maps.LatLng(('@item.Latitude'), ('@item.Longitude'));
            var marker = new google.maps.Marker({
                position: latlng,
                map: map
            })
               </text>
            }
     }

        //    // Create a <script> tag and set the USGS URL as the source.
        //    var latlng = google.maps.LatLng()
        //    var script = document.createElement('script');
        //    // (In this example we use a locally stored copy instead.)
        //    script.src = 'http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp';
        //    //script.src = '(localdb)MSSQLLocalDB/aspnet-ASPProject-20160913073032/dbo.Addresses';
        //    document.getElementsByTagName('head')[0].appendChild(script);
        //}

        //// Loop through the results array and place a marker for each
        //// set of coordinates.
        //window.eqfeed_callback = function (results)
        //{
        //    for (var i = 0; i < results.features.length; i++) {
        //        var coords = results.features[i].geometry.coordinates;
        //        var latLng = new google.maps.LatLng(coords[1], coords[0]);
        //        var marker = new google.maps.Marker({
        //            position: latLng,
        //            map: map
        //        });
        //    }
        //}
    </script>
   
</head>
<body>
    <div id="map"></div>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAV6uHA4fKRN_FEQwGv6DJFBZwuJGXYEPo&callback=initialize">
    </script>
</body>
</html>
